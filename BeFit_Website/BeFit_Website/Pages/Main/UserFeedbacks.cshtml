@page
@model BeFit_Website.Pages.Main.UserFeedbacksModel
@{
    <link href="~/css/userfeedbacks.css" rel="stylesheet" />
    <link href="~/css/bootstrap.min.css" rel="stylesheet" />
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"><img src="~/photos/4.png" width="80" draggable="false" /></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" asp-page="/Main/Home">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">

                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Profile</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" asp-page="/UserInfo/EditUserData">Edit Profile</a>

                        <a class="dropdown-item" asp-page="/Main/UserFeedbacks">feedback</a>
                        <a class="dropdown-item" asp-page="/UserInfo/Login">Log out</a>

                    </div>
                </li>
            </ul>

        </div>
    </nav>
    <div class="feedback-container">
        <div class="feedback-wrapper">
            <section class="feedback-post" style="margin-top:100px;">
                <header>Add your Feedback</header>
                <form method="post" class="feedback-form" id="feedback-form" enctype="multipart/form-data">
                    <div class="feedback-content">
                        <img src="@Model.user.ProfileUrl" style="border-radius: 50%">
                        <div class="feedback-details">
                            <p>@Model.user.UserName</p>
                            <p id="datetime"></p>
                        </div>
                    </div>
                    <input asp-for="Feedback.Message" placeholder="your feedback is important to us 💖" required>
                    <button type="submit" asp-page-handler="AddFeedback" id="post-button" class="Post-button">Post</button>
                </form>
        </div>
    </div>
    @foreach (var obj in Model.feedbackList)
    {
        <div class="feedback-container">
            @{
                if (obj.UserId.ToString() == HttpContext.Session.GetString("Id").Replace("\"", ""))
                {
                    <form method="post" class="feedback-form" enctype="multipart/form-data">
                        <button class="delete" type="submit" asp-page-handler="DeleteFeedback" asp-route-itemid=@obj.Id>✖️</button>
                    </form>
                }
            }
            <div class="feedback-wrapper">
                <section class="feedback-post">
                    <form class="feedback-form">
                        <div class="feedback-content">
                            <img src="@obj.FeedbackUser.ProfileUrl" style="border-radius: 50%">
                            <div class="feedback-details">
                                <p>@obj.FeedbackUser.UserName</p>
                                <p>@obj.TimeCreated</p>
                            </div>
                        </div>
                        <input type="text" asp-for="@obj.Message" readonly="true">
                    </form>
            </div>
        </div>
                  }

}
<script src="~/js/userfeedbacks.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../assets/js/vendor/jquery.slim.min.js"><\/script>')</script>
<script src="~/js/bootstrap.bundle.min.js"></script>
